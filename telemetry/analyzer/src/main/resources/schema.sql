CREATE TABLE actions (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   sensor_id VARCHAR,
   type VARCHAR,
   value INTEGER,
   CONSTRAINT pk_actions PRIMARY KEY (id)
);

CREATE TABLE conditions (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   sensor_id VARCHAR,
   type VARCHAR,
   operator VARCHAR,
   value VARCHAR,
   CONSTRAINT pk_conditions PRIMARY KEY (id)
);

CREATE TABLE scenarios (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   hub_id VARCHAR,
   name VARCHAR,
   CONSTRAINT pk_scenarios PRIMARY KEY (id)
);

CREATE TABLE scenario_actions (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   scenario_id BIGINT,
   action_id BIGINT,
   CONSTRAINT pk_scenario_actions PRIMARY KEY (id)
);

ALTER TABLE scenario_actions ADD CONSTRAINT FK_SCENARIO_ACTIONS_ON_ACTION FOREIGN KEY (action_id) REFERENCES actions (id);

ALTER TABLE scenario_actions ADD CONSTRAINT FK_SCENARIO_ACTIONS_ON_SCENARIO FOREIGN KEY (scenario_id) REFERENCES scenarios (id);

CREATE TABLE scenario_conditions (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   scenario_id BIGINT,
   condition_id BIGINT,
   CONSTRAINT pk_scenario_conditions PRIMARY KEY (id)
);

ALTER TABLE scenario_conditions ADD CONSTRAINT FK_SCENARIO_CONDITIONS_ON_CONDITION FOREIGN KEY (condition_id) REFERENCES conditions (id);

ALTER TABLE scenario_conditions ADD CONSTRAINT FK_SCENARIO_CONDITIONS_ON_SCENARIO FOREIGN KEY (scenario_id) REFERENCES scenarios (id);

CREATE TABLE sensors (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   hub_id VARCHAR,
   type VARCHAR,
   CONSTRAINT pk_sensors PRIMARY KEY (id)
);